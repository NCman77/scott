# 智能背誦遮罩工具 - 教學版使用說明

## 🎯 專為英文老師設計的考卷講解工具

這個工具讓您輕鬆進行考卷講解，無需手動塗掉答案！

---

## 📖 快速開始

### 👨‍🏫 教學流程

#### 1. 準備考卷
將考卷掃描或拍照存成圖片（jpg、png、webp）。  
**建議**：檔名使用數字編號，例如：`01.jpg`、`02.jpg`、`03.jpg`

#### 2. 匯入考卷
1. 點擊 Header 的「匯入 | Import」按鈕
2. **批次選擇**所有考卷圖片（可按住 Ctrl 多選）
3. 圖片會自動依檔名排序

#### 3. AI 自動偵測
1. 輸入 Gemini API Key（在 Header 輸入框）
2. 點擊「偵測 | AI Detect」按鈕
3. AI 會自動找出所有手寫區域並產生遮罩

#### 4. 儲存專案
點擊「儲存 | Save」，匯出為 JSON 檔案（可重新編輯）

#### 5. 上課講解
1. 點擊「讀取 | Load」載入專案
2. 切換到「View」模式（按鍵盤 `V`）
3. **點擊遮罩 → 答案顯示！**
4. 再次點擊 → 答案隱藏

---

## 🎨 核心功能說明

### 1. **點擊遮罩切換顯示**（🌟 核心功能）

**使用方式：**
1. 確保在「View」模式（左側工具列第一個按鈕）
2. 直接點擊遮罩區域
3. 遮罩會消失，顯示答案
4. 再次點擊同個位置，遮罩重新出現

**適用場景：**
- 上課講解時，逐題點擊顯示答案
- 學生自主練習，點擊確認答案

**提示**：
- 遮罩重疊時，會優先處理最上層的遮罩
- 筆刷類型遮罩：點擊路徑附近即可

---

### 2. **AI 自動偵測手寫**

**獲取 API Key：**
1. 前往 [Google AI Studio](https://aistudio.google.com/app/apikey)
2. 免費取得 Gemini API Key
3. 格式：`AIza...`（39字元）

**使用步驟：**
1. 匯入考卷圖片
2. 在 Header 輸入 API Key 並儲存
3. 點擊「偵測 | AI Detect」
4. 等待幾秒（視圖片大小）
5. 手寫區域自動產生遮罩

**注意事項：**
- AI 只偵測手寫，不會標記印刷文字
- 如果有遺漏，可手動使用「方框」或「筆刷」補充

---

### 3. **批次匯入並排序**

**檔名建議：**
```
01_英文_閱讀測驗.jpg
02_英文_文法填空.jpg
03_英文_翻譯.jpg
```

**排序規則：**
- 自動依檔名字母/數字順序排列
- 支援中文檔名
- 數字會正確排序（例如：2 在 10 之前）

**一次可匯入多少張？**
理論上無限制，但建議每個專案不超過 20 張以保持效能。

---

### 4. **JSON 壓縮儲存**

**為什麼選擇 JSON？**
- ✅ 可以重新載入編輯
- ✅ 壓縮圖片品質（原本 0.8 → 現在 0.6）
- ✅ 包含所有遮罩位置
- ✅ 跨平台通用格式

**檔案大小估算：**
- 1 張圖片 + 20 個遮罩：約 150-300 KB
- 10 張圖片專案：約 2-3 MB

**何時儲存？**
- AI 偵測完成後
- 手動補充遮罩後
- 上課前一天（備份）

---

### 5. **Undo/Redo 復原功能**

**快捷鍵：**
- `Ctrl + Z`：復原
- `Ctrl + Y`：重做

**支援操作：**
- 新增遮罩
- AI 偵測結果
- 清除所有遮罩

**提示：**
左側工具列有「Undo」和「Redo」按鈕，無法操作時會變灰色。

---

## 🎮 快捷鍵總覽

| 按鍵 | 功能 | 說明 |
|------|------|------|
| `V` | View 模式 | **上課必用**，點擊遮罩切換顯示 |
| `R` | 方框工具 | 手動新增方框遮罩 |
| `B` | 筆刷工具 | 手動塗抹遮罩 |
| `E` | 擦除工具 | 移除遮罩 |
| `Ctrl+Z` | 復原 | 誤操作時使用 |
| `Ctrl+Y` | 重做 | 復原後反悔 |
| `←` `→` | 換頁 | 切換考卷頁面 |
| `Esc` | 退出全螢幕 | 全螢幕模式下使用 |

---

## 💡 使用技巧

### 技巧 1：上課前準備
1. 前一天匯入所有考卷
2. 執行 AI 偵測
3. 檢查並手動補充遺漏
4. 儲存為 JSON
5. 上課當天載入即可

### 技巧 2：顏色標記重點
- **紅色**：錯誤率高的答案
- **藍色**：重點文法
- **綠色**：額外補充

點擊左側「調色盤圖示」可選擇任意顏色！

### 技巧 3：全螢幕講解
1. 點擊 Header 的「全螢幕 | View」
2. 投影到大螢幕
3. 使用觸控板或滑鼠點擊遮罩
4. 長按退出全螢幕

### 技巧 4：學生自主練習
1. 將 JSON 檔案分享給學生
2. 學生載入後切換到 View 模式
3. 先自己思考答案
4. 點擊遮罩確認

---

## 🔧 常見問題

### Q1: 如何調整遮罩大小？
**A:** 使用方框工具時，拖曳即可任意大小。使用筆刷工具時：
- 雙擊筆刷按鈕（iPad/平板）
- 電腦版：滑鼠移到筆刷按鈕自動彈出滑桿

### Q2: AI 偵測有遺漏怎麼辦？
**A:** 使用「方框（R）」或「筆刷（B）」工具手動補充。

### Q3: 誤刪遮罩怎麼辦？
**A:** 按 `Ctrl+Z` 立即復原！

### Q4: 可以只隱藏部分遮罩嗎？
**A:** 可以！在 View 模式下，點擊哪個遮罩就隱藏哪個，其他保持不變。

### Q5: 圖片太大怎麼辦？
**A:** 載入後會自動縮放至適應視窗，也可以用右下角的「+」「-」按鈕手動調整。

### Q6: 可以離線使用嗎？
**A:** 
- **匯入、編輯、儲存**：完全離線可用
- **AI 偵測**：需要網路連接

---

## 📂 檔案管理建議

### 資料夾結構
```
考卷專案/
├── 原始圖片/
│   ├── 01.jpg
│   ├── 02.jpg
│   └── 03.jpg
├── 專案檔案/
│   ├── Unit1_考卷_20260118.json
│   └── Unit2_考卷_20260119.json
└── 備份/
    └── ...
```

### 命名規則
- 圖片：`序號_單元_題型.jpg`
- 專案：`單元_考卷_日期.json`

---

## 🚀 部署方式

### 方式 1：本地開啟（最簡單）
直接雙擊 `index.html` 即可使用

### 方式 2：本地伺服器
```bash
# Python
python -m http.server 8000

# Node.js
npx http-server
```

### 方式 3：GitHub Pages
已自動推送至：https://github.com/NCman77/scott  
可啟用 GitHub Pages 線上使用

---

## 📊 版本資訊

**版本**：v4.1 教學版  
**更新日期**：2026-01-18  
**GitHub**：https://github.com/NCman77/scott

**核心功能：**
- ✅ 點擊遮罩切換顯示（教學模式）
- ✅ AI 自動偵測手寫
- ✅ 批次匯入依序排列
- ✅ JSON 壓縮儲存（品質 0.6）
- ✅ Undo/Redo 復原
- ✅ 自訂顏色選擇

**檔案清單：**
- `index.html` - 主頁面
- `styles.css` - 樣式
- `app.js` - 程式邏輯
- `README.md` - 本說明檔案
- `CHANGELOG.md` - 更新歷史

---

## 👨‍🏫 適用對象

- ✅ 英文老師
- ✅ 數學老師
- ✅ 理化老師
- ✅ 所有需要講解考卷的教學者
- ✅ 學生自主學習

---

## 📧 問題回報

如有任何問題或建議，請在 GitHub Issues 回報：  
https://github.com/NCman77/scott/issues

---

**祝教學順利！ 🎓**
